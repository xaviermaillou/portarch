{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst compat_1 = require(\"./tinify/compat\");\n\nconst Source_1 = require(\"./tinify/Source\");\n\nconst Error_1 = require(\"./tinify/Error\");\n\nclass Tinify {\n  constructor() {\n    this.default = this;\n  }\n\n  set key(key) {\n    this._key = key;\n    this._client = undefined;\n  }\n\n  set appIdentifier(appIdentifier) {\n    this._appIdentifier = appIdentifier;\n    this._client = undefined;\n  }\n\n  set proxy(proxy) {\n    this._proxy = proxy;\n    this._client = undefined;\n  }\n\n  get client() {\n    if (!this._key) {\n      throw new this.AccountError(\"Provide an API key with tinify.key = ...\");\n    }\n\n    if (!this._client) {\n      this._client = new this.Client(this._key, this._appIdentifier, this._proxy);\n    }\n\n    return this._client;\n  }\n\n  fromFile(path) {\n    return Source_1.default.fromFile(path);\n  }\n\n  fromBuffer(data) {\n    return Source_1.default.fromBuffer(data);\n  }\n\n  fromUrl(url) {\n    return Source_1.default.fromUrl(url);\n  }\n\n  validate(callback) {\n    function is429(err) {\n      return err instanceof Error_1.AccountError && err.status === 429;\n    }\n\n    try {\n      const request = this.client.request(\"post\", \"/shrink\");\n      return compat_1.nodeify(request.catch(err => {\n        if (err instanceof Error_1.ClientError || is429(err)) return;\n        throw err;\n      }).then(function ignore() {}), callback);\n    } catch (err) {\n      return compat_1.nodeify(Promise.reject(err), callback);\n    }\n  }\n\n}\n\nexports.default = new Tinify();","map":{"version":3,"sources":["/Users/xavier/Documents/Développement/portarch/node_modules/tinify/lib/tinify.js"],"names":["Object","defineProperty","exports","value","compat_1","require","Source_1","Error_1","Tinify","constructor","default","key","_key","_client","undefined","appIdentifier","_appIdentifier","proxy","_proxy","client","AccountError","Client","fromFile","path","fromBuffer","data","fromUrl","url","validate","callback","is429","err","status","request","nodeify","catch","ClientError","then","ignore","Promise","reject"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,iBAAD,CAAxB;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,iBAAD,CAAxB;;AACA,MAAME,OAAO,GAAGF,OAAO,CAAC,gBAAD,CAAvB;;AACA,MAAMG,MAAN,CAAa;AACTC,EAAAA,WAAW,GAAG;AACV,SAAKC,OAAL,GAAe,IAAf;AACH;;AACD,MAAIC,GAAJ,CAAQA,GAAR,EAAa;AACT,SAAKC,IAAL,GAAYD,GAAZ;AACA,SAAKE,OAAL,GAAeC,SAAf;AACH;;AACD,MAAIC,aAAJ,CAAkBA,aAAlB,EAAiC;AAC7B,SAAKC,cAAL,GAAsBD,aAAtB;AACA,SAAKF,OAAL,GAAeC,SAAf;AACH;;AACD,MAAIG,KAAJ,CAAUA,KAAV,EAAiB;AACb,SAAKC,MAAL,GAAcD,KAAd;AACA,SAAKJ,OAAL,GAAeC,SAAf;AACH;;AACD,MAAIK,MAAJ,GAAa;AACT,QAAI,CAAC,KAAKP,IAAV,EAAgB;AACZ,YAAM,IAAI,KAAKQ,YAAT,CAAsB,0CAAtB,CAAN;AACH;;AACD,QAAI,CAAC,KAAKP,OAAV,EAAmB;AACf,WAAKA,OAAL,GAAe,IAAI,KAAKQ,MAAT,CAAgB,KAAKT,IAArB,EAA2B,KAAKI,cAAhC,EAAgD,KAAKE,MAArD,CAAf;AACH;;AACD,WAAO,KAAKL,OAAZ;AACH;;AACDS,EAAAA,QAAQ,CAACC,IAAD,EAAO;AACX,WAAOjB,QAAQ,CAACI,OAAT,CAAiBY,QAAjB,CAA0BC,IAA1B,CAAP;AACH;;AACDC,EAAAA,UAAU,CAACC,IAAD,EAAO;AACb,WAAOnB,QAAQ,CAACI,OAAT,CAAiBc,UAAjB,CAA4BC,IAA5B,CAAP;AACH;;AACDC,EAAAA,OAAO,CAACC,GAAD,EAAM;AACT,WAAOrB,QAAQ,CAACI,OAAT,CAAiBgB,OAAjB,CAAyBC,GAAzB,CAAP;AACH;;AACDC,EAAAA,QAAQ,CAACC,QAAD,EAAW;AACf,aAASC,KAAT,CAAeC,GAAf,EAAoB;AAChB,aAAOA,GAAG,YAAYxB,OAAO,CAACa,YAAvB,IAAuCW,GAAG,CAACC,MAAJ,KAAe,GAA7D;AACH;;AACD,QAAI;AACA,YAAMC,OAAO,GAAG,KAAKd,MAAL,CAAYc,OAAZ,CAAoB,MAApB,EAA4B,SAA5B,CAAhB;AACA,aAAO7B,QAAQ,CAAC8B,OAAT,CAAiBD,OAAO,CAACE,KAAR,CAAcJ,GAAG,IAAI;AACzC,YAAIA,GAAG,YAAYxB,OAAO,CAAC6B,WAAvB,IAAsCN,KAAK,CAACC,GAAD,CAA/C,EACI;AACJ,cAAMA,GAAN;AACH,OAJuB,EAIrBM,IAJqB,CAIhB,SAASC,MAAT,GAAkB,CAAG,CAJL,CAAjB,EAIyBT,QAJzB,CAAP;AAKH,KAPD,CAQA,OAAOE,GAAP,EAAY;AACR,aAAO3B,QAAQ,CAAC8B,OAAT,CAAiBK,OAAO,CAACC,MAAR,CAAeT,GAAf,CAAjB,EAAsCF,QAAtC,CAAP;AACH;AACJ;;AAjDQ;;AAmDb3B,OAAO,CAACQ,OAAR,GAAkB,IAAIF,MAAJ,EAAlB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst compat_1 = require(\"./tinify/compat\");\nconst Source_1 = require(\"./tinify/Source\");\nconst Error_1 = require(\"./tinify/Error\");\nclass Tinify {\n    constructor() {\n        this.default = this;\n    }\n    set key(key) {\n        this._key = key;\n        this._client = undefined;\n    }\n    set appIdentifier(appIdentifier) {\n        this._appIdentifier = appIdentifier;\n        this._client = undefined;\n    }\n    set proxy(proxy) {\n        this._proxy = proxy;\n        this._client = undefined;\n    }\n    get client() {\n        if (!this._key) {\n            throw new this.AccountError(\"Provide an API key with tinify.key = ...\");\n        }\n        if (!this._client) {\n            this._client = new this.Client(this._key, this._appIdentifier, this._proxy);\n        }\n        return this._client;\n    }\n    fromFile(path) {\n        return Source_1.default.fromFile(path);\n    }\n    fromBuffer(data) {\n        return Source_1.default.fromBuffer(data);\n    }\n    fromUrl(url) {\n        return Source_1.default.fromUrl(url);\n    }\n    validate(callback) {\n        function is429(err) {\n            return err instanceof Error_1.AccountError && err.status === 429;\n        }\n        try {\n            const request = this.client.request(\"post\", \"/shrink\");\n            return compat_1.nodeify(request.catch(err => {\n                if (err instanceof Error_1.ClientError || is429(err))\n                    return;\n                throw err;\n            }).then(function ignore() { }), callback);\n        }\n        catch (err) {\n            return compat_1.nodeify(Promise.reject(err), callback);\n        }\n    }\n}\nexports.default = new Tinify;\n"]},"metadata":{},"sourceType":"script"}