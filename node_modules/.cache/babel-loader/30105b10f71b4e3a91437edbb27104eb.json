{"ast":null,"code":"var _jsxFileName = \"/Users/xavier/Documents/De\\u0301veloppement/portarch/src/components/config.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport firebase from '../firebase';\n\nconst Config = ({\n  username,\n  setUsername,\n  profilePicture,\n  setProfilePicture\n}) => {\n  const [name, setName] = useState('');\n  const [usernameDisplayed, setUsernameDisplayed] = useState('');\n  const [editName, setEditName] = useState(false);\n  const [editPhoto, setEditPhoto] = useState(false);\n  const [errorMsg, setErrorMsg] = useState('Elegí un nombre');\n  const [errorMsg2, setErrorMsg2] = useState('Subí una foto');\n  useEffect(() => {\n    setUsernameDisplayed(username);\n  }, [username]);\n\n  const signOut = () => {\n    firebase.auth().signOut();\n    window.location.reload(true);\n  };\n\n  const handleChangeName = e => {\n    setName(e.target.value);\n  };\n\n  const handleSubmitName = e => {\n    e.preventDefault();\n\n    if (name.length < 2) {\n      setName('');\n      setErrorMsg('Debe tener al menos 2 carácteres !');\n      setTimeout(function () {\n        setErrorMsg('Elegí un nombre');\n      }, 3000);\n      return;\n    }\n\n    var user = firebase.auth().currentUser;\n\n    if (user) {\n      user.updateProfile({\n        displayName: name\n      });\n      setEditName(false);\n      setUsername(name);\n    } else {\n      return;\n    }\n  };\n\n  const handleChangePhoto = e => {\n    var user = firebase.auth().currentUser;\n\n    if (e.target.files && user) {\n      var file = e.target.files[0];\n      var ref = firebase.storage().ref().child('profilePicture/' + user.uid);\n      var task = ref.put(file);\n      ref.getDownloadURL().then(url => {\n        user === null || user === void 0 ? void 0 : user.updateProfile({\n          photoURL: url\n        });\n        task.on('state_changed', function (snapshot) {\n          var percentage = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n\n          if (percentage === 100) {\n            setProfilePicture(url);\n          }\n        });\n      });\n      setEditPhoto(false);\n    } else {\n      setErrorMsg2('Debe ser un archivo JPG o PNG');\n      setTimeout(function () {\n        setErrorMsg2('Subí una foto');\n      }, 3000);\n      return;\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"configContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profilePictureGrand\",\n    style: {\n      backgroundImage: `url(${profilePicture})`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }), (username === null || editName === true) && /*#__PURE__*/React.createElement(\"form\", {\n    className: \"signupForm\",\n    onSubmit: e => {\n      handleSubmitName(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"username\",\n    type: \"text\",\n    className: \"editName\",\n    placeholder: errorMsg,\n    value: name,\n    onChange: e => {\n      handleChangeName(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  })), username !== null && editName === false && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, usernameDisplayed), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setEditName(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, \"Editar nombre\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 85\n    }\n  })), editPhoto === true && /*#__PURE__*/React.createElement(\"form\", {\n    className: \"signupForm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, errorMsg2), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"photo\",\n    type: \"file\",\n    onChange: e => {\n      handleChangePhoto(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setEditPhoto(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"Editar foto de perfil\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 86\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: signOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"Desconectarse\"));\n};\n\nexport default Config;","map":{"version":3,"sources":["/Users/xavier/Documents/Développement/portarch/src/components/config.tsx"],"names":["React","useState","useEffect","firebase","Config","username","setUsername","profilePicture","setProfilePicture","name","setName","usernameDisplayed","setUsernameDisplayed","editName","setEditName","editPhoto","setEditPhoto","errorMsg","setErrorMsg","errorMsg2","setErrorMsg2","signOut","auth","window","location","reload","handleChangeName","e","target","value","handleSubmitName","preventDefault","length","setTimeout","user","currentUser","updateProfile","displayName","handleChangePhoto","files","file","ref","storage","child","uid","task","put","getDownloadURL","then","url","photoURL","on","snapshot","percentage","bytesTransferred","totalBytes","backgroundImage"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport firebase from '../firebase';\n\ntype Props = {\n    username: string|null|undefined,\n    profilePicture: string|null|undefined,\n    setUsername: any,\n    setProfilePicture: any\n}\n\nconst Config: React.FC<Props> = ({ username, setUsername, profilePicture, setProfilePicture }) => {\n    const [name, setName] = useState<string>('');\n    const [usernameDisplayed, setUsernameDisplayed] = useState<string|null|undefined>('');\n    const [editName, setEditName] = useState<boolean>(false);\n    const [editPhoto, setEditPhoto] = useState<boolean>(false);\n    const [errorMsg, setErrorMsg] = useState<string>('Elegí un nombre');\n    const [errorMsg2, setErrorMsg2] = useState<string>('Subí una foto');\n\n    useEffect(() => {\n        setUsernameDisplayed(username);\n    }, [username]);\n\n    const signOut = () => {\n        firebase.auth().signOut();\n        window.location.reload(true);\n    }\n\n    const handleChangeName = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setName(e.target.value);\n    }\n\n    const handleSubmitName = (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        if(name.length < 2) {\n            setName('');\n            setErrorMsg('Debe tener al menos 2 carácteres !');\n            setTimeout(function(){ setErrorMsg('Elegí un nombre'); }, 3000);\n            return;\n        }\n        var user = firebase.auth().currentUser;\n        if (user) {\n            user.updateProfile({\n                displayName: name,\n            });\n            setEditName(false);\n            setUsername(name);\n        } else {\n          return;\n        }\n    }\n\n    const handleChangePhoto = (e: React.ChangeEvent<HTMLInputElement>) => {\n        var user = firebase.auth().currentUser;\n        \n        if(e.target.files && user) {\n            var file = e.target.files[0];\n            var ref = firebase.storage().ref().child('profilePicture/' + user.uid);\n            var task = ref.put(file);\n            ref.getDownloadURL().then((url) => {\n                user?.updateProfile({\n                    photoURL: url\n                });\n                task.on('state_changed', function(snapshot) {\n                    var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) *100;\n                    if (percentage === 100) {setProfilePicture(url);}\n                });\n            });\n            setEditPhoto(false);\n        } else {\n            setErrorMsg2('Debe ser un archivo JPG o PNG');\n            setTimeout(function(){ setErrorMsg2('Subí una foto'); }, 3000);\n            return;\n        }\n    }\n\n    return (\n        <div className=\"configContainer\">\n            <div className=\"profilePictureGrand\" style={{backgroundImage: `url(${profilePicture})`}}></div>\n            {\n                (username === null || editName === true) &&\n                <form className=\"signupForm\" onSubmit={(e) => {handleSubmitName(e)}}>\n                    <input name=\"username\" type=\"text\" className=\"editName\" placeholder={errorMsg} value={name} onChange={(e) => {handleChangeName(e)}}/>\n                </form>\n            }\n            {\n                (username!== null && editName === false) &&\n                <div>\n                    <h3 className=\"username\">{usernameDisplayed}</h3>\n                    <button onClick={() => setEditName(true)}>Editar nombre</button><br />\n                </div>\n            }\n            {(editPhoto === true) &&\n                <form className=\"signupForm\">\n                    <label>{errorMsg2}</label>\n                    <input name=\"photo\" type=\"file\" onChange={(e) => {handleChangePhoto(e)}}/>\n                </form>\n            }\n            <button onClick={() => setEditPhoto(true)}>Editar foto de perfil</button><br />\n            <button onClick={signOut}>Desconectarse</button>\n        </div>\n    );\n}\n\nexport default Config;"]},"metadata":{},"sourceType":"module"}