{"ast":null,"code":"var _jsxFileName = \"/Users/xavier/Documents/De\\u0301veloppement/portarch/src/components/recherche.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport Tendance from './tendance';\nimport firebase from '../firebase';\n\nfunction UseTendances() {\n  const [œuvres, setœuvres] = useState([]);\n  useEffect(() => {\n    firebase.firestore().collection('œuvres').orderBy('note', 'desc').limit(6).onSnapshot(snapshot => {\n      let position = 1;\n      const newœuvres = snapshot.docs.map(doc => ({\n        id: doc.id,\n        position: position++,\n        ...doc.data(),\n        photos: []\n      }));\n      setœuvres(newœuvres);\n    });\n  }, []);\n  return œuvres;\n}\n\nconst Recherche = () => {\n  const [isSearching, setIsSearching] = useState(false);\n  const [search, setSearch] = useState('');\n  const [resultats, setResultats] = useState([]);\n  const tendances = UseTendances();\n  useEffect(() => {\n    document.getElementsByClassName('lateral')[0].classList.add('ouvert');\n  }, []);\n\n  const handleChange = e => {\n    setSearch(e.target.value);\n  };\n\n  const handleSearch = e => {\n    e.preventDefault();\n    setIsSearching(true);\n    firebase.firestore().collection('œuvres').where('keywords', 'array-contains-any', search.toLowerCase().split(\" \")).orderBy('note', 'desc').onSnapshot(snapshot => {\n      let position = 1;\n      const newResultats = snapshot.docs.map(doc => ({\n        id: doc.id,\n        position: position++,\n        ...doc.data()\n      }));\n      setResultats(newResultats);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"lateral rechercheContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: e => handleSearch(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: search,\n    placeholder: \"Palabras claves...\",\n    onChange: e => handleChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 57\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"searchIcone\",\n    type: \"submit\",\n    value: \"OK\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 160\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, \"BUSCAR\")), isSearching && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }, \"RESULTADOS\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tendencesContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }\n  }, resultats.map(resultat => /*#__PURE__*/React.createElement(Tendance, {\n    key: resultat.id,\n    id: resultat.id,\n    position: resultat.position,\n    titre: resultat.titre,\n    photo: resultat.photo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 59\n    }\n  })))), !isSearching && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, \"TENDENCIAS\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tendancesContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, Object.keys(tendances).length === 0 && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 65\n    }\n  }, /*#__PURE__*/React.createElement(Tendance, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 70\n    }\n  }), /*#__PURE__*/React.createElement(Tendance, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 82\n    }\n  }), /*#__PURE__*/React.createElement(Tendance, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 94\n    }\n  }), /*#__PURE__*/React.createElement(Tendance, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 106\n    }\n  }), /*#__PURE__*/React.createElement(Tendance, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 118\n    }\n  })), tendances.map(tendance => /*#__PURE__*/React.createElement(Tendance, {\n    key: tendance.id,\n    id: tendance.id,\n    position: tendance.position,\n    titre: tendance.titre,\n    photo: tendance.photo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 59\n    }\n  })))));\n};\n\nexport default Recherche;","map":{"version":3,"sources":["/Users/xavier/Documents/Développement/portarch/src/components/recherche.tsx"],"names":["React","useState","useEffect","Tendance","firebase","UseTendances","œuvres","setœuvres","firestore","collection","orderBy","limit","onSnapshot","snapshot","position","newœuvres","docs","map","doc","id","data","photos","Recherche","isSearching","setIsSearching","search","setSearch","resultats","setResultats","tendances","document","getElementsByClassName","classList","add","handleChange","e","target","value","handleSearch","preventDefault","where","toLowerCase","split","newResultats","resultat","titre","photo","Object","keys","length","tendance"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Tendance from './tendance';\nimport firebase from '../firebase';\n\nfunction UseTendances() {\n    const [œuvres, setœuvres] = useState<any>([]);\n\n    useEffect(() => {\n        firebase.firestore().collection('œuvres').orderBy('note', 'desc').limit(6).onSnapshot((snapshot) => {\n            let position = 1;\n            const newœuvres = snapshot.docs.map((doc) => ({\n                id: doc.id,\n                position: position++,\n                ...doc.data(),\n                photos: [] as any\n            }));\n    \n            setœuvres(newœuvres);\n        });\n    }, []);\n\n    return œuvres;\n}\n\nconst Recherche: React.FC = () => {\n    const [isSearching, setIsSearching] = useState<boolean>(false);\n    const [search, setSearch] = useState<string>('');\n    const [resultats, setResultats] = useState<any>([]);\n    const tendances = UseTendances();\n\n    useEffect(() => {\n        document.getElementsByClassName('lateral')[0].classList.add('ouvert');\n    }, []);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setSearch(e.target.value);\n    }\n\n    const handleSearch = (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        setIsSearching(true);\n\n        firebase.firestore().collection('œuvres').where('keywords', 'array-contains-any', search.toLowerCase().split(\" \")).orderBy('note', 'desc').onSnapshot((snapshot) => {\n            let position = 1;\n            const newResultats = snapshot.docs.map((doc) => ({\n                id: doc.id,\n                position: position++,\n                ...doc.data()\n            }));\n            setResultats(newResultats);\n        });\n    }\n\n    return (\n        <div className=\"lateral rechercheContainer\">\n            <h2>\n                <form onSubmit={(e) => handleSearch(e)}><input type=\"text\" value={search} placeholder=\"Palabras claves...\" onChange={(e) => handleChange(e)} /><input className=\"searchIcone\" type=\"submit\" value=\"OK\" /></form>\n                <div>BUSCAR</div>\n            </h2>\n            {isSearching &&\n                <div>\n                    <h3>RESULTADOS</h3>\n                    <div className=\"tendencesContainer\">\n                        {resultats.map((resultat: any) => <Tendance \n                                                            key={resultat.id}\n                                                            id={resultat.id}\n                                                            position={resultat.position}\n                                                            titre={resultat.titre}\n                                                            photo={resultat.photo}\n                                                        />)}\n                    </div>\n                </div>\n            }\n            {!isSearching &&\n                <div>\n                    <h3>TENDENCIAS</h3>\n                    <div className=\"tendancesContainer\">\n                        {Object.keys(tendances).length === 0 && <div><Tendance /><Tendance /><Tendance /><Tendance /><Tendance /></div>}\n                        {tendances.map((tendance: any) => <Tendance \n                                                            key={tendance.id} \n                                                            id={tendance.id}\n                                                            position={tendance.position} \n                                                            titre={tendance.titre} \n                                                            photo={tendance.photo} \n                                                        />)}\n                    </div>\n                </div>\n            }\n        </div>\n    );\n}\n\nexport default Recherche;"]},"metadata":{},"sourceType":"module"}