{"ast":null,"code":"var _jsxFileName = \"/Users/xavier/Documents/De\\u0301veloppement/portarch/src/components/projet.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\n\nconst Projet = ({\n  refresh,\n  setRefresh,\n  id,\n  titre,\n  photo,\n  description,\n  username\n}) => {\n  const [enableEdit, setEnableEdit] = useState(false);\n  const [editTitre, setEditTitre] = useState(false);\n  const [editedTitre, setEditedTitre] = useState();\n  const [editDescription, setEditDescription] = useState(false);\n  const [editedDescription, setEditedDescription] = useState();\n  const [confirmDelete, setConfirmDelete] = useState(false);\n  const [width, setWidth] = useState(0);\n  const [photos, setPhotos] = useState([]);\n  const [maxFiles, setMaxFiles] = useState(6);\n  const [error, setError] = useState(false);\n  const [errorMsg, setErrorMsg] = useState('');\n  const [projet, setProjet] = useState();\n  useEffect(() => {\n    setProjet(document.getElementById('mon' + id));\n    setEditedTitre(titre);\n    setEditedDescription(description);\n    setWidth(document.getElementsByClassName('lateral')[0].clientWidth);\n\n    if (projet) {\n      setTimeout(function () {\n        projet.style.height = width + 'px';\n        projet.style.width = width + 'px';\n      }, 500);\n    }\n\n    firebase.firestore().collection('photos').where('œuvre', '==', id).onSnapshot(snapshot => {\n      const newPhotos = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setPhotos(newPhotos);\n    });\n  }, [id, titre, description, width, projet]);\n\n  const handleEdit = e => {\n    if (!enableEdit) {\n      var _e$currentTarget$quer;\n\n      projet.style.height = width * 1.3 + 'px';\n      (_e$currentTarget$quer = e.currentTarget.querySelector('.edit')) === null || _e$currentTarget$quer === void 0 ? void 0 : _e$currentTarget$quer.classList.add('ouvert');\n      setEnableEdit(true);\n    }\n  };\n\n  const handleChangeTitre = e => {\n    setEditedTitre(e.target.value);\n  };\n\n  const handleSubmitTitre = e => {\n    e.preventDefault();\n    firebase.firestore().collection('œuvres').doc(id).update({\n      titre: editedTitre\n    });\n    const usernameKeywords = username.toLowerCase().split(' ');\n    const titleKeywords = editedTitre === null || editedTitre === void 0 ? void 0 : editedTitre.toLowerCase().split(' ');\n    firebase.firestore().collection('œuvres').doc(id).update({\n      keywords: titleKeywords === null || titleKeywords === void 0 ? void 0 : titleKeywords.concat(usernameKeywords)\n    });\n    setEditTitre(false);\n    setRefresh(!refresh);\n  };\n\n  const handleChangePhotoPrincipale = e => {\n    const loadingIcon = document.getElementById('premierLoadingIcon' + id);\n    loadingIcon.classList.add('ouvert');\n\n    if (e.target.files) {\n      const file = e.target.files[0];\n\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png') {\n        setError(true);\n        setErrorMsg('Debe ser JPG o PNG !');\n        loadingIcon.classList.remove('ouvert');\n        return;\n      }\n\n      var ref = firebase.storage().ref('œuvres-photos-principales/' + file.name);\n      ref.put(file).then(result => {\n        ref.getDownloadURL().then(url => {\n          firebase.firestore().collection('œuvres').doc(id).update({\n            photo: url\n          });\n          loadingIcon.classList.remove('ouvert');\n        });\n      });\n      setRefresh(!refresh);\n    }\n  };\n\n  const handleAddPhotos = e => {\n    var _e$currentTarget$quer2;\n\n    (_e$currentTarget$quer2 = e.currentTarget.querySelector('input')) === null || _e$currentTarget$quer2 === void 0 ? void 0 : _e$currentTarget$quer2.click();\n  };\n\n  const handleChangePhotos = e => {\n    const loadingIcon = document.getElementById('secondLoadingIcon' + id);\n    loadingIcon.classList.add('ouvert');\n\n    if (e.target.files) {\n      var temp = [];\n      var files = Array.from(e.target.files);\n      var quantity = e.target.files.length;\n      const originalQuantity = e.target.files.length;\n\n      if (maxFiles < quantity) {\n        setError(true);\n        setErrorMsg('6 máximo !');\n        loadingIcon.classList.remove('ouvert');\n        return;\n      }\n\n      files.forEach(file => {\n        if (file.type !== 'image/jpeg' && file.type !== 'image/png') {\n          setError(true);\n          setErrorMsg('Debe ser JPG o PNG !');\n          loadingIcon.classList.remove('ouvert');\n          return;\n        }\n\n        var ref = firebase.storage().ref('œuvres-photos-secondaires/' + file.name);\n        ref.put(file).then(result => {\n          ref.getDownloadURL().then(url => {\n            firebase.firestore().collection('photos').add({\n              url: url,\n              œuvre: id\n            });\n            temp.push(url);\n            quantity = quantity - 1;\n\n            if (quantity === 0) {\n              setMaxFiles(maxFiles - originalQuantity);\n              var temp2 = [...photos];\n              setPhotos(temp2.concat(temp));\n              loadingIcon.classList.remove('ouvert');\n            }\n          });\n        });\n      });\n    }\n  };\n\n  const handleFutureDelete = e => {\n    var _e$currentTarget$quer3;\n\n    (_e$currentTarget$quer3 = e.currentTarget.querySelector('.delete')) === null || _e$currentTarget$quer3 === void 0 ? void 0 : _e$currentTarget$quer3.classList.toggle('ouvert');\n  };\n\n  const handlePhotoDelete = i => {\n    firebase.firestore().collection('photos').doc(i).delete();\n    setMaxFiles(maxFiles - 1);\n  };\n\n  const handleChangeDescription = e => {\n    setEditedDescription(e.target.value);\n  };\n\n  const handleSubmitDescription = e => {\n    e.preventDefault();\n    firebase.firestore().collection('œuvres').doc(id).update({\n      description: editedDescription\n    });\n    setEditDescription(false);\n    setRefresh(!refresh);\n  };\n\n  const handleDelete = () => {\n    firebase.firestore().collection('œuvres').doc(id).delete();\n  };\n\n  const handleFinishEdit = e => {\n    var _e$currentTarget$pare;\n\n    (_e$currentTarget$pare = e.currentTarget.parentElement) === null || _e$currentTarget$pare === void 0 ? void 0 : _e$currentTarget$pare.classList.remove('ouvert');\n    setEnableEdit(false);\n    projet.style.height = width + 'px';\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"projet\",\n    id: 'mon' + id,\n    style: {\n      backgroundImage: `url(${photo})`\n    },\n    onClick: e => handleEdit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, editTitre === false && /*#__PURE__*/React.createElement(\"h4\", {\n    onClick: () => setEditTitre(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 41\n    }\n  }, titre), editTitre === true && /*#__PURE__*/React.createElement(\"form\", {\n    className: \"signupForm\",\n    onSubmit: e => handleSubmitTitre(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    autoFocus: true,\n    type: \"text\",\n    value: editedTitre,\n    onChange: e => handleChangeTitre(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"formSubmit\",\n    value: \"OK\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"signupForm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"photoPrincipale\" + id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 21\n    }\n  }, \"Cambiar im\\xE1gen principal \", /*#__PURE__*/React.createElement(\"i\", {\n    id: 'premierLoadingIcon' + id,\n    className: \"loadingIconEdit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 86\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"photoPrincipale\" + id,\n    type: \"file\",\n    style: {\n      display: 'none'\n    },\n    onChange: e => handleChangePhotoPrincipale(e),\n    multiple: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 17\n    }\n  }, \"Im\\xE1genes suplementarias \", /*#__PURE__*/React.createElement(\"i\", {\n    id: 'secondLoadingIcon' + id,\n    className: \"loadingIconEdit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 48\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"photosContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 17\n    }\n  }, photos.map((photo, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: \"photosSecondairesEdit\",\n    style: {\n      backgroundImage: `url(${photo.url})`,\n      height: width / 3.6,\n      width: width / 3.6\n    },\n    onClick: e => handleFutureDelete(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"delete\",\n    onClick: () => handlePhotoDelete(photo.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 29\n    }\n  }))), photos.length < 6 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addPhotos\",\n    onClick: e => handleAddPhotos(e),\n    style: {\n      height: width / 3.6,\n      width: width / 3.6\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: e => handleChangePhotos(e),\n    style: {\n      display: 'none'\n    },\n    type: \"file\",\n    multiple: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 33\n    }\n  })))), editDescription === false && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"description\",\n    onClick: () => setEditDescription(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 47\n    }\n  }, description || \"Agregar descripción\"), editDescription === true && /*#__PURE__*/React.createElement(\"form\", {\n    className: \"signupForm\",\n    onSubmit: e => handleSubmitDescription(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    autoFocus: true,\n    rows: 4,\n    maxLength: 280,\n    value: editedDescription,\n    onChange: e => handleChangeDescription(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"formSubmit textareaSubmit\",\n    value: \"OK\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ok\",\n    onClick: e => handleFinishEdit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }\n  }, \"Terminar\"), confirmDelete === false && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"deleteForm\",\n    onClick: () => setConfirmDelete(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 45\n    }\n  }, \"Eliminar\"), confirmDelete === true && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"confirm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 44\n    }\n  }, \"Queres eliminar este proyecto?\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 99\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    onClick: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 105\n    }\n  }, \"SI\"), /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => setConfirmDelete(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 143\n    }\n  }, \"NO\")), error === true && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"confirm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 36\n    }\n  }, errorMsg, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 71\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => setError(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 77\n    }\n  }, \"OK\"))));\n};\n\nexport default Projet;","map":{"version":3,"sources":["/Users/xavier/Documents/Développement/portarch/src/components/projet.tsx"],"names":["React","useState","useEffect","firebase","Projet","refresh","setRefresh","id","titre","photo","description","username","enableEdit","setEnableEdit","editTitre","setEditTitre","editedTitre","setEditedTitre","editDescription","setEditDescription","editedDescription","setEditedDescription","confirmDelete","setConfirmDelete","width","setWidth","photos","setPhotos","maxFiles","setMaxFiles","error","setError","errorMsg","setErrorMsg","projet","setProjet","document","getElementById","getElementsByClassName","clientWidth","setTimeout","style","height","firestore","collection","where","onSnapshot","snapshot","newPhotos","docs","map","doc","data","handleEdit","e","currentTarget","querySelector","classList","add","handleChangeTitre","target","value","handleSubmitTitre","preventDefault","update","usernameKeywords","toLowerCase","split","titleKeywords","keywords","concat","handleChangePhotoPrincipale","loadingIcon","files","file","type","remove","ref","storage","name","put","then","result","getDownloadURL","url","handleAddPhotos","click","handleChangePhotos","temp","Array","from","quantity","length","originalQuantity","forEach","œuvre","push","temp2","handleFutureDelete","toggle","handlePhotoDelete","i","delete","handleChangeDescription","handleSubmitDescription","handleDelete","handleFinishEdit","parentElement","backgroundImage","display","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\n\ntype Props = {\n    refresh: boolean,\n    setRefresh: any,\n    id: string,\n    titre?: string,\n    photo?: string,\n    description?: string\n    username: string,\n}\n\nconst Projet: React.FC<Props> = ({ refresh, setRefresh, id, titre, photo, description, username }) => {\n    const [enableEdit, setEnableEdit] = useState<boolean>(false);\n    const [editTitre, setEditTitre] = useState<boolean>(false);\n    const [editedTitre, setEditedTitre] = useState<string>();\n    const [editDescription, setEditDescription] = useState<boolean>(false);\n    const [editedDescription, setEditedDescription] = useState<string>();\n    const [confirmDelete, setConfirmDelete] = useState<boolean>(false);\n    const [width, setWidth] = useState<number>(0);\n    const [photos, setPhotos] = useState<any>([]);\n    const [maxFiles, setMaxFiles] = useState<number>(6);\n    const [error, setError] = useState<boolean>(false);\n    const [errorMsg, setErrorMsg] = useState<string>('');\n    const [projet, setProjet] = useState<any>();\n\n    useEffect(() => {\n        setProjet(document.getElementById('mon' + id) as HTMLElement);\n        setEditedTitre(titre);\n        setEditedDescription(description);\n        setWidth(document.getElementsByClassName('lateral')[0].clientWidth);\n        if (projet) {\n            setTimeout(function() {\n                projet.style.height = width + 'px';\n                projet.style.width = width + 'px';\n            }, 500);\n        }\n\n        firebase.firestore().collection('photos').where('œuvre', '==', id).onSnapshot((snapshot) => {\n            const newPhotos = snapshot.docs.map((doc) => ({\n                id: doc.id,\n                ...doc.data()\n            }));\n\n            setPhotos(newPhotos);\n        });\n    }, [id, titre, description, width, projet]);\n\n    const handleEdit = (e: React.MouseEvent<HTMLElement>) => {\n        if(!enableEdit)\n        {\n            projet.style.height = width * 1.3 + 'px';\n            e.currentTarget.querySelector('.edit')?.classList.add('ouvert');\n            setEnableEdit(true);\n        }\n    }\n\n    const handleChangeTitre = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setEditedTitre(e.target.value);\n    }\n\n    const handleSubmitTitre = (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        firebase.firestore().collection('œuvres').doc(id).update({\n            titre: editedTitre\n        });\n        const usernameKeywords = username.toLowerCase().split(' ');\n        const titleKeywords = editedTitre?.toLowerCase().split(' ');\n        firebase.firestore().collection('œuvres').doc(id).update({\n            keywords: titleKeywords?.concat(usernameKeywords)\n        });\n        setEditTitre(false);\n        setRefresh(!refresh);\n    }\n\n    const handleChangePhotoPrincipale = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const loadingIcon = document.getElementById('premierLoadingIcon' + id) as HTMLElement;\n        loadingIcon.classList.add('ouvert');\n        if(e.target.files) {\n            const file = e.target.files[0];\n            if(file.type !== 'image/jpeg' && file.type !== 'image/png') {\n                setError(true);\n                setErrorMsg('Debe ser JPG o PNG !');\n                loadingIcon.classList.remove('ouvert');\n                return;\n            }\n            var ref = firebase.storage().ref('œuvres-photos-principales/' + file.name);\n            ref.put(file).then((result) => {\n                ref.getDownloadURL().then((url) => {\n                    firebase.firestore().collection('œuvres').doc(id).update({\n                        photo: url\n                    });\n                    loadingIcon.classList.remove('ouvert');\n                });\n            });\n            setRefresh(!refresh);\n        }\n    }\n\n    const handleAddPhotos = (e: React.MouseEvent<HTMLElement>) => {\n        e.currentTarget.querySelector('input')?.click();\n    }\n\n    const handleChangePhotos = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const loadingIcon = document.getElementById('secondLoadingIcon' + id) as HTMLElement;\n        loadingIcon.classList.add('ouvert');\n        if(e.target.files) {\n            var temp: any[] = [];\n            var files = Array.from(e.target.files);\n            var quantity = e.target.files.length;\n            const originalQuantity = e.target.files.length;\n            if(maxFiles < quantity) {\n                setError(true);\n                setErrorMsg('6 máximo !');\n                loadingIcon.classList.remove('ouvert');\n                return;\n            }\n            files.forEach((file) => {\n                if(file.type !== 'image/jpeg' && file.type !== 'image/png') {\n                    setError(true);\n                    setErrorMsg('Debe ser JPG o PNG !');\n                    loadingIcon.classList.remove('ouvert');\n                    return;\n                }\n                var ref = firebase.storage().ref('œuvres-photos-secondaires/' + file.name);\n                ref.put(file).then((result) => {\n                    ref.getDownloadURL().then((url) => {\n                        firebase.firestore().collection('photos').add({\n                            url: url,\n                            œuvre: id\n                        });\n                        temp.push(url);\n                        quantity = quantity - 1;\n                        if(quantity === 0) {\n                            setMaxFiles(maxFiles - originalQuantity);\n                            var temp2 = [...photos];\n                            setPhotos(temp2.concat(temp));\n                            loadingIcon.classList.remove('ouvert');\n                        }\n                    })\n                })\n            })\n        }\n    }\n\n    const handleFutureDelete = (e: React.MouseEvent<HTMLElement>) => {\n        e.currentTarget.querySelector('.delete')?.classList.toggle('ouvert');\n    }\n\n    const handlePhotoDelete = (i: string) => {\n        firebase.firestore().collection('photos').doc(i).delete();\n        setMaxFiles(maxFiles - 1);\n    }\n\n    const handleChangeDescription = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n        setEditedDescription(e.target.value);\n    }\n\n    const handleSubmitDescription = (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        firebase.firestore().collection('œuvres').doc(id).update({\n            description: editedDescription\n        });\n        setEditDescription(false);\n        setRefresh(!refresh)\n    }\n\n    const handleDelete = () => {\n        firebase.firestore().collection('œuvres').doc(id).delete();\n    }\n\n    const handleFinishEdit = (e: React.MouseEvent<HTMLElement>) => {\n        e.currentTarget.parentElement?.classList.remove('ouvert');\n        setEnableEdit(false);\n        projet.style.height = width + 'px';\n    }\n\n\n    return(\n        <div className=\"projet\" id={'mon' + id} style={{backgroundImage: `url(${photo})`}} onClick={(e) => handleEdit(e)}>\n            <div className=\"edit\">\n                {editTitre === false && <h4 onClick={() => setEditTitre(true)}>{titre}</h4>}\n                {editTitre === true && \n                    <form className=\"signupForm\" onSubmit={(e) => handleSubmitTitre(e)}>\n                        <input autoFocus type=\"text\" value={editedTitre} onChange={(e) => handleChangeTitre(e)} />\n                        <input type='submit' className=\"formSubmit\" value='OK' />\n                    </form>\n                }\n                <form className=\"signupForm\">\n                    <label htmlFor={\"photoPrincipale\" + id}>Cambiar imágen principal <i id={'premierLoadingIcon' + id} className=\"loadingIconEdit\"></i></label>\n                    <input id={\"photoPrincipale\" + id} type=\"file\" style={{display: 'none'}} onChange={(e) => handleChangePhotoPrincipale(e)} multiple={false} />\n                </form>\n                <label>Imágenes suplementarias <i id={'secondLoadingIcon' + id} className=\"loadingIconEdit\"></i></label>\n                <div className=\"photosContainer\">\n                    {photos.map((photo: any, index: any) => \n                        <div \n                            key={index}\n                            className=\"photosSecondairesEdit\" \n                            style={{backgroundImage: `url(${photo.url})` ,height: width/3.6, width: width/3.6}}\n                            onClick={(e) => handleFutureDelete(e)}\n                        >\n                            <div className=\"delete\" onClick={() => handlePhotoDelete(photo.id)}></div>\n                        </div>\n                    )}\n                    {photos.length < 6 && \n                        <div className=\"addPhotos\"  onClick={(e) => handleAddPhotos(e)} style={{height: width/3.6, width: width/3.6}}>\n                            <form>\n                                <input onChange={(e) => handleChangePhotos(e)} style={{display: 'none'}} type=\"file\" multiple />\n                            </form>\n                        </div>\n                    }\n                </div>\n                {editDescription === false && <div className=\"description\" onClick={() => setEditDescription(true)}>{description || \"Agregar descripción\"}</div>}\n                {editDescription === true && \n                    <form className=\"signupForm\" onSubmit={(e) => handleSubmitDescription(e)}>\n                        <textarea autoFocus rows={4} maxLength={280} value={editedDescription} onChange={(e) => handleChangeDescription(e)}></textarea>\n                        <input type='submit' className=\"formSubmit textareaSubmit\" value='OK' />\n                    </form>\n                }\n                <div className=\"ok\" onClick={(e) => handleFinishEdit(e)}>Terminar</div>\n                {confirmDelete === false && <div className=\"deleteForm\" onClick={() => setConfirmDelete(true)}>Eliminar</div>}\n                {confirmDelete === true && <div className=\"confirm\">Queres eliminar este proyecto?<br /><span onClick={handleDelete}>SI</span><span onClick={() => setConfirmDelete(false)}>NO</span></div>}\n                {error === true && <div className=\"confirm\">{errorMsg}<br /><span onClick={() => setError(false)}>OK</span></div>}\n            </div>\n        </div>\n    );\n}\n\nexport default Projet;"]},"metadata":{},"sourceType":"module"}