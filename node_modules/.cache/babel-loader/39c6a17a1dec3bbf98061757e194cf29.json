{"ast":null,"code":"var _jsxFileName = \"/Users/xavier/Documents/De\\u0301veloppement/portarch/src/components/ajouter.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport firebase from '../firebase';\n\nconst Ajouter = () => {\n  var _firebase$auth$curren, _firebase$auth$curren2;\n\n  const [œuvre, setœuvre] = useState({\n    auteur: (_firebase$auth$curren = firebase.auth().currentUser) === null || _firebase$auth$curren === void 0 ? void 0 : _firebase$auth$curren.displayName,\n    photoAuteur: (_firebase$auth$curren2 = firebase.auth().currentUser) === null || _firebase$auth$curren2 === void 0 ? void 0 : _firebase$auth$curren2.photoURL,\n    titre: '',\n    photoPrincipale: ''\n  });\n  const [percentage, setPercentage] = useState();\n  const [photoPrincipale, setPhotoPrincipale] = useState('https://firebasestorage.googleapis.com/v0/b/portarch-4f70e.appspot.com/o/œuvres-photos-principales%2Fgreece.png?alt=media&token=7ef93575-12c5-42c4-aff3-7467e18f019a');\n  useEffect(() => {\n    document.getElementsByClassName('lateral')[0].classList.add('ouvert');\n  }, []);\n  useEffect(() => {\n    const mainPictureForm = document.getElementsByClassName('mainPictureForm')[0];\n    setTimeout(function () {\n      let width = document.getElementsByClassName('lateral')[0].clientWidth;\n      mainPictureForm.style.height = width / 2 + \"px\";\n      mainPictureForm.style.width = width + \"px\";\n    }, 500);\n  }, []);\n\n  const handleEditPhoto = () => {\n    document.getElementsByName('photo')[0].click();\n  };\n\n  const handleChangePhoto = e => {\n    if (e.target.files) {\n      var file = e.target.files[0];\n      var ref = firebase.storage().ref().child('œuvres-photos-principales/' + file.name);\n      var task = ref.put(file);\n      ref.getDownloadURL().then(url => {\n        task.on('state_changed', function (snapshot) {\n          var percentage = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n          setPercentage(percentage);\n          const newœuvre = { ...œuvre\n          };\n          newœuvre.photoPrincipale = url;\n          setœuvre(newœuvre);\n\n          if (percentage === 100) {\n            setPhotoPrincipale(url);\n          }\n        });\n      });\n    } else {\n      return;\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"lateral ajouterContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, \"AGREGAR\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"signupForm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }, \"T\\xEDtulo\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, \"Foto principal \", percentage), /*#__PURE__*/React.createElement(\"input\", {\n    style: {\n      display: 'none'\n    },\n    name: \"photo\",\n    type: \"file\",\n    onChange: e => {\n      handleChangePhoto(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainPictureForm\",\n    style: {\n      backgroundImage: `url(${photoPrincipale})`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit\",\n    onClick: handleEditPhoto,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 103\n    }\n  }, \"EDITAR\"))));\n};\n\nexport default Ajouter;","map":{"version":3,"sources":["/Users/xavier/Documents/Développement/portarch/src/components/ajouter.tsx"],"names":["React","useState","useEffect","firebase","Ajouter","œuvre","setœuvre","auteur","auth","currentUser","displayName","photoAuteur","photoURL","titre","photoPrincipale","percentage","setPercentage","setPhotoPrincipale","document","getElementsByClassName","classList","add","mainPictureForm","setTimeout","width","clientWidth","style","height","handleEditPhoto","getElementsByName","click","handleChangePhoto","e","target","files","file","ref","storage","child","name","task","put","getDownloadURL","then","url","on","snapshot","bytesTransferred","totalBytes","newœuvre","display","backgroundImage"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport firebase from '../firebase';\n\nconst Ajouter: React.FC = () => {\n    const [œuvre, setœuvre] = useState({\n        auteur: firebase.auth().currentUser?.displayName,\n        photoAuteur: firebase.auth().currentUser?.photoURL,\n        titre: '',\n        photoPrincipale: ''\n    });\n    const [percentage, setPercentage] = useState<number>();\n    const [photoPrincipale, setPhotoPrincipale] = useState<string>('https://firebasestorage.googleapis.com/v0/b/portarch-4f70e.appspot.com/o/œuvres-photos-principales%2Fgreece.png?alt=media&token=7ef93575-12c5-42c4-aff3-7467e18f019a');\n\n    useEffect(() => {\n        document.getElementsByClassName('lateral')[0].classList.add('ouvert');\n    }, []);\n\n    useEffect(() => {\n        const mainPictureForm = document.getElementsByClassName('mainPictureForm')[0] as HTMLElement;\n        setTimeout(function(){ \n            let width = document.getElementsByClassName('lateral')[0].clientWidth;\n            mainPictureForm.style.height = width/2 + \"px\";\n            mainPictureForm.style.width = width + \"px\";  \n        }, 500);       \n    }, []);\n\n    const handleEditPhoto = () => {\n        document.getElementsByName('photo')[0].click()\n    }\n\n    const handleChangePhoto = (e: React.ChangeEvent<HTMLInputElement>) => {        \n        if(e.target.files) {\n            var file = e.target.files[0];\n            var ref = firebase.storage().ref().child('œuvres-photos-principales/' + file.name);\n            var task = ref.put(file);\n            ref.getDownloadURL().then((url) => {\n                task.on('state_changed', function(snapshot) {\n                    var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) *100;\n                    setPercentage(percentage);\n                    const newœuvre = {...œuvre};\n                    newœuvre.photoPrincipale = url;\n                    setœuvre(newœuvre);\n                    if (percentage === 100) {setPhotoPrincipale(url);}\n                });\n            });\n        } else {\n            return;\n        }\n    }\n\n    return (\n        <div className=\"lateral ajouterContainer\">\n            <h2>AGREGAR</h2>\n            <form className=\"signupForm\">\n                <label>Título</label>\n                <input type=\"text\" />\n                <label>Foto principal {percentage}</label>\n                <input style={{display: 'none'}} name=\"photo\" type=\"file\" onChange={(e) => {handleChangePhoto(e)}} />\n                <div className=\"mainPictureForm\" style={{backgroundImage: `url(${photoPrincipale})`}}><div className=\"edit\" onClick={handleEditPhoto}>EDITAR</div></div>\n            </form>\n        </div>\n    );\n}\n\nexport default Ajouter;"]},"metadata":{},"sourceType":"module"}