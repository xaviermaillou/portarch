{"ast":null,"code":"var _jsxFileName = \"/Users/xavier/Documents/De\\u0301veloppement/portarch/src/components/projet.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\n\nconst Projet = ({\n  refresh,\n  setRefresh,\n  id,\n  titre,\n  photo,\n  description\n}) => {\n  const [enableEdit, setEnableEdit] = useState(false);\n  const [editTitre, setEditTitre] = useState(false);\n  const [editedTitre, setEditedTitre] = useState();\n  const [editDescription, setEditDescription] = useState(false);\n  const [editedDescription, setEditedDescription] = useState();\n  const [confirmDelete, setConfirmDelete] = useState(false);\n  const [width, setWidth] = useState(0);\n  useEffect(() => {\n    const projet = document.getElementById('mon' + id);\n    setEditedTitre(titre);\n    setWidth(document.getElementsByClassName('lateral')[0].clientWidth);\n    setTimeout(function () {\n      projet.style.height = width + 'px';\n      projet.style.width = width + 'px';\n    }, 500);\n  }, [id, titre, width]);\n\n  const handleEdit = e => {\n    if (!enableEdit) {\n      var _e$currentTarget$quer;\n\n      console.log('click');\n      (_e$currentTarget$quer = e.currentTarget.querySelector('.edit')) === null || _e$currentTarget$quer === void 0 ? void 0 : _e$currentTarget$quer.classList.add('ouvert');\n      setEnableEdit(true);\n    }\n  };\n\n  const handleChangeTitre = e => {\n    setEditedTitre(e.target.value);\n  };\n\n  const handleSubmitTitre = e => {\n    e.preventDefault();\n    firebase.firestore().collection('œuvres').doc(id).update({\n      titre: editedTitre\n    });\n    setEditTitre(false);\n    setRefresh(!refresh);\n  };\n\n  const handleChangeDescription = e => {\n    setEditedDescription(e.target.value);\n  };\n\n  const handleSubmitDescription = e => {\n    e.preventDefault();\n    firebase.firestore().collection('œuvres').doc(id).update({\n      descripción: editedDescription\n    });\n    setEditDescription(false);\n    setRefresh(!refresh);\n  };\n\n  const handleDelete = () => {\n    firebase.firestore().collection('œuvres').doc(id).delete();\n  };\n\n  const handleFinishEdit = e => {\n    var _e$currentTarget$pare;\n\n    (_e$currentTarget$pare = e.currentTarget.parentElement) === null || _e$currentTarget$pare === void 0 ? void 0 : _e$currentTarget$pare.classList.remove('ouvert');\n    setEnableEdit(false);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"projet\",\n    id: 'mon' + id,\n    style: {\n      backgroundImage: `url(${photo})`\n    },\n    onClick: e => handleEdit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, editTitre === false && /*#__PURE__*/React.createElement(\"h4\", {\n    onClick: () => setEditTitre(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 41\n    }\n  }, titre), editTitre === true && /*#__PURE__*/React.createElement(\"form\", {\n    className: \"signupForm\",\n    onSubmit: e => handleSubmitTitre(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    autoFocus: true,\n    type: \"text\",\n    value: editedTitre,\n    onChange: e => handleChangeTitre(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  })), editDescription === false && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"description\",\n    onClick: () => setEditDescription(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 47\n    }\n  }, description || \"Agregar descripción\"), editDescription === true && /*#__PURE__*/React.createElement(\"form\", {\n    className: \"signupForm\",\n    onSubmit: e => handleSubmitDescription(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    autoFocus: true,\n    rows: 4,\n    maxLength: 280,\n    value: editedDescription,\n    onChange: e => handleChangeDescription(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"OK\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ok\",\n    onClick: e => handleFinishEdit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, \"Terminar\"), confirmDelete === false && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"delete\",\n    onClick: () => setConfirmDelete(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 45\n    }\n  }, \"Eliminar\"), confirmDelete === true && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"confirmDelete\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 44\n    }\n  }, \"Queres eliminar este proyecto?\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 105\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    onClick: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 111\n    }\n  }, \"SI\"), /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => setConfirmDelete(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 149\n    }\n  }, \"NO\"))));\n};\n\nexport default Projet;","map":{"version":3,"sources":["/Users/xavier/Documents/Développement/portarch/src/components/projet.tsx"],"names":["React","useState","useEffect","firebase","Projet","refresh","setRefresh","id","titre","photo","description","enableEdit","setEnableEdit","editTitre","setEditTitre","editedTitre","setEditedTitre","editDescription","setEditDescription","editedDescription","setEditedDescription","confirmDelete","setConfirmDelete","width","setWidth","projet","document","getElementById","getElementsByClassName","clientWidth","setTimeout","style","height","handleEdit","e","console","log","currentTarget","querySelector","classList","add","handleChangeTitre","target","value","handleSubmitTitre","preventDefault","firestore","collection","doc","update","handleChangeDescription","handleSubmitDescription","descripción","handleDelete","delete","handleFinishEdit","parentElement","remove","backgroundImage"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\n\ntype Props = {\n    refresh: boolean,\n    setRefresh: any,\n    id: string,\n    titre?: string,\n    photo?: string,\n    description?: string\n}\n\nconst Projet: React.FC<Props> = ({ refresh, setRefresh, id, titre, photo, description }) => {\n    const [enableEdit, setEnableEdit] = useState<boolean>(false);\n    const [editTitre, setEditTitre] = useState<boolean>(false);\n    const [editedTitre, setEditedTitre] = useState<string>();\n    const [editDescription, setEditDescription] = useState<boolean>(false);\n    const [editedDescription, setEditedDescription] = useState<string>();\n    const [confirmDelete, setConfirmDelete] = useState<boolean>(false);\n    const [width, setWidth] = useState<number>(0);\n\n    useEffect(() => {\n        const projet = document.getElementById('mon' + id) as HTMLElement;\n        setEditedTitre(titre);\n        setWidth(document.getElementsByClassName('lateral')[0].clientWidth);\n        setTimeout(function() {\n            projet.style.height = width + 'px';\n            projet.style.width = width + 'px';\n        }, 500);\n    }, [id, titre, width]);\n\n    const handleEdit = (e: React.MouseEvent<HTMLElement>) => {\n        if(!enableEdit)\n        {\n            console.log('click');\n            e.currentTarget.querySelector('.edit')?.classList.add('ouvert');\n            setEnableEdit(true);\n        }\n    }\n\n    const handleChangeTitre = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setEditedTitre(e.target.value);\n    }\n\n    const handleSubmitTitre = (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        firebase.firestore().collection('œuvres').doc(id).update({\n            titre: editedTitre\n        });\n        setEditTitre(false);\n        setRefresh(!refresh);\n    }\n\n    const handleChangeDescription = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n        setEditedDescription(e.target.value);\n    }\n\n    const handleSubmitDescription = (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        firebase.firestore().collection('œuvres').doc(id).update({\n            descripción: editedDescription\n        });\n        setEditDescription(false);\n        setRefresh(!refresh)\n    }\n\n    const handleDelete = () => {\n        firebase.firestore().collection('œuvres').doc(id).delete();\n    }\n\n    const handleFinishEdit = (e: React.MouseEvent<HTMLElement>) => {\n        e.currentTarget.parentElement?.classList.remove('ouvert');\n        setEnableEdit(false);\n    }\n\n    return(\n        <div className=\"projet\" id={'mon' + id} style={{backgroundImage: `url(${photo})`}} onClick={(e) => handleEdit(e)}>\n            <div className=\"edit\">\n                {editTitre === false && <h4 onClick={() => setEditTitre(true)}>{titre}</h4>}\n                {editTitre === true && \n                    <form className=\"signupForm\" onSubmit={(e) => handleSubmitTitre(e)}>\n                        <input autoFocus type=\"text\" value={editedTitre} onChange={(e) => handleChangeTitre(e)} />\n                    </form>\n                }\n                {editDescription === false && <div className=\"description\" onClick={() => setEditDescription(true)}>{description || \"Agregar descripción\"}</div>}\n                {editDescription === true && \n                    <form className=\"signupForm\" onSubmit={(e) => handleSubmitDescription(e)}>\n                        <textarea autoFocus rows={4} maxLength={280} value={editedDescription} onChange={(e) => handleChangeDescription(e)}></textarea>\n                        <input type='submit' value='OK' />\n                    </form>\n                }\n                <div className=\"ok\" onClick={(e) => handleFinishEdit(e)}>Terminar</div>\n                {confirmDelete === false && <div className=\"delete\" onClick={() => setConfirmDelete(true)}>Eliminar</div>}\n                {confirmDelete === true && <div className=\"confirmDelete\">Queres eliminar este proyecto?<br /><span onClick={handleDelete}>SI</span><span onClick={() => setConfirmDelete(false)}>NO</span></div>}\n            </div>\n        </div>\n    );\n}\n\nexport default Projet;"]},"metadata":{},"sourceType":"module"}