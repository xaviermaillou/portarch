{"ast":null,"code":"var _jsxFileName = \"/Users/xavier/Documents/De\\u0301veloppement/portarch/src/App.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport Panneau from './components/panneau';\nimport Menu from './components/menu';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport Hamburger from './components/hamburger';\n\nfunction Useœuvres() {\n  const [œuvres, setœuvres] = useState([]);\n  useEffect(() => {\n    firebase.firestore().collection('œuvres').onSnapshot(snapshot => {\n      const newœuvres = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data(),\n        photos: []\n      }));\n      setœuvres(newœuvres);\n    });\n  }, []);\n  return œuvres;\n}\n\nfunction UseMesœuvres() {\n  const [mesœuvres, setMesœuvres] = useState([]);\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        firebase.firestore().collection('œuvres').where('auteurID', '==', user.uid).onSnapshot(snapshot => {\n          const newMesœuvres = snapshot.docs.map(doc => ({\n            id: doc.id,\n            ...doc.data()\n          }));\n          setMesœuvres(newMesœuvres);\n        });\n      } else {\n        return;\n      }\n    });\n  }, []);\n  return mesœuvres;\n}\n\nfunction UseMesFavoris() {\n  const [mesFavoris, setMesfavoris] = useState([]);\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        firebase.firestore().collection('favoris').where('utilisateur', '==', user.uid).onSnapshot(snapshot => {\n          const newMesFavoris = snapshot.docs.map(doc => ({\n            id: doc.id,\n            ...doc.data()\n          }));\n          setMesfavoris(newMesFavoris);\n        });\n      } else {\n        return;\n      }\n    });\n  }, []);\n  return mesFavoris;\n}\n\nconst App = () => {\n  const [refresh, setRefresh] = useState(false);\n  const [auth, setAuth] = useState(false);\n  const [userID, setUserID] = useState('');\n  const [username, setUsername] = useState();\n  const [profilePicture, setProfilePicture] = useState();\n  const [uni, setUni] = useState();\n  const [pays, setPays] = useState();\n  const œuvres = Useœuvres();\n  const mesœuvres = UseMesœuvres();\n  const mesFavoris = UseMesFavoris();\n  const [margin, setMargin] = useState('0px');\n  useEffect(() => {\n    if (window.screen.width <= 600) {\n      setMargin((window.screen.height - window.screen.width) / 2 + 'px');\n    }\n  }, []);\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        setAuth(true);\n        setUserID(user.uid);\n        firebase.firestore().collection('config').doc(user.uid).onSnapshot(snapshot => {\n          var _snapshot$data, _snapshot$data2, _snapshot$data3, _snapshot$data4;\n\n          setUsername((_snapshot$data = snapshot.data()) === null || _snapshot$data === void 0 ? void 0 : _snapshot$data.username);\n          ((_snapshot$data2 = snapshot.data()) === null || _snapshot$data2 === void 0 ? void 0 : _snapshot$data2.photoProfil) ? setProfilePicture(user.photoURL) : setProfilePicture('https://firebasestorage.googleapis.com/v0/b/portarch-4f70e.appspot.com/o/icônes%2Fprofil2.png?alt=media&token=0f86a5d5-f039-42af-89fc-4f915f10a3d5');\n          setUni((_snapshot$data3 = snapshot.data()) === null || _snapshot$data3 === void 0 ? void 0 : _snapshot$data3.uni);\n          setPays((_snapshot$data4 = snapshot.data()) === null || _snapshot$data4 === void 0 ? void 0 : _snapshot$data4.pays);\n        });\n      } else {\n        setAuth(false);\n      }\n    });\n  }, []);\n\n  const reload = () => {\n    window.location.reload(true);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    onClick: reload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, \"PORTARCH\"), /*#__PURE__*/React.createElement(Hamburger, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Menu, {\n    refresh: refresh,\n    setRefresh: setRefresh,\n    mesœuvres: mesœuvres,\n    auth: auth,\n    userID: userID,\n    username: username,\n    setUsername: setUsername,\n    profilePicture: profilePicture,\n    setProfilePicture: setProfilePicture,\n    uni: uni,\n    setUni: setUni,\n    pays: pays,\n    setPays: setPays,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"masterDIV\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panneauContainer\",\n    style: {\n      paddingTop: `${margin}`,\n      paddingBottom: `${margin}`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, œuvres.map(œuvre => /*#__PURE__*/React.createElement(Panneau, {\n    key: œuvre.id,\n    refresh: refresh,\n    setRefresh: setRefresh,\n    auth: auth,\n    id: œuvre.id,\n    titre: œuvre.titre,\n    auteurID: œuvre.auteurID,\n    photo: œuvre.photo,\n    description: œuvre.description,\n    mesFavoris: mesFavoris,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 45\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"slideAuteur\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  })));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/xavier/Documents/Développement/portarch/src/App.tsx"],"names":["React","useState","useEffect","Panneau","Menu","firebase","Hamburger","Useœuvres","œuvres","setœuvres","firestore","collection","onSnapshot","snapshot","newœuvres","docs","map","doc","id","data","photos","UseMesœuvres","mesœuvres","setMesœuvres","auth","onAuthStateChanged","user","where","uid","newMesœuvres","UseMesFavoris","mesFavoris","setMesfavoris","newMesFavoris","App","refresh","setRefresh","setAuth","userID","setUserID","username","setUsername","profilePicture","setProfilePicture","uni","setUni","pays","setPays","margin","setMargin","window","screen","width","height","photoProfil","photoURL","reload","location","paddingTop","paddingBottom","œuvre","titre","auteurID","photo","description"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Panneau from './components/panneau'\nimport Menu from './components/menu';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport Hamburger from './components/hamburger';\nimport Auteur from './components/auteur';\n\nfunction Useœuvres() {\n    const [œuvres, setœuvres] = useState<any>([]);\n\n    useEffect(() => {\n        firebase.firestore().collection('œuvres').onSnapshot((snapshot) => {\n            const newœuvres = snapshot.docs.map((doc) => ({\n                id: doc.id,\n                ...doc.data(),\n                photos: [] as any\n            }));\n    \n            setœuvres(newœuvres);\n        });\n    }, []);\n\n    return œuvres;\n}\n\nfunction UseMesœuvres() {\n    const [mesœuvres, setMesœuvres] = useState<any>([]);\n\n    useEffect(() => {\n        firebase.auth().onAuthStateChanged(function(user) {\n            if (user) {\n                firebase.firestore().collection('œuvres').where('auteurID', '==', user.uid).onSnapshot((snapshot) => {\n                    const newMesœuvres = snapshot.docs.map((doc) => ({\n                        id: doc.id,\n                        ...doc.data()\n                    }));\n\n                    setMesœuvres(newMesœuvres);\n                });\n            } else {\n            return;\n            }\n        });\n    }, []);\n\n    return mesœuvres;\n}\n\nfunction UseMesFavoris() {\n    const [mesFavoris, setMesfavoris] = useState<any>([]);\n\n    useEffect(() => {\n        firebase.auth().onAuthStateChanged(function(user) {\n            if(user) {\n                firebase.firestore().collection('favoris').where('utilisateur', '==', user.uid).onSnapshot((snapshot) => {\n                    const newMesFavoris = snapshot.docs.map((doc) => ({\n                        id: doc.id,\n                        ...doc.data()\n                    }));\n\n                    setMesfavoris(newMesFavoris);\n                });\n            } else {\n                return;\n            }\n        });\n    }, []);\n\n    return mesFavoris;\n}\n  \nconst App: React.FC = () => {\n\n    const [refresh, setRefresh] = useState<boolean>(false);\n    const [auth, setAuth] = useState<boolean>(false);\n    const [userID, setUserID] = useState<string>('');\n    const [username, setUsername] = useState<string|null|undefined>();\n    const [profilePicture, setProfilePicture] = useState<string|null|undefined>();\n    const [uni, setUni] = useState<string|null|undefined>();\n    const [pays, setPays] = useState<string|null|undefined>();\n    const œuvres = Useœuvres();\n    const mesœuvres = UseMesœuvres();\n    const mesFavoris = UseMesFavoris();\n    const [margin, setMargin] = useState<string>('0px');\n\n    useEffect(() => {\n        if(window.screen.width <= 600) {\n            setMargin((window.screen.height - window.screen.width) / 2 + 'px');     \n        }\n    }, []);\n\n    useEffect(() => {\n        firebase.auth().onAuthStateChanged(function(user) {\n            if (user) {\n              setAuth(true);\n              setUserID(user.uid);\n              firebase.firestore().collection('config').doc(user.uid).onSnapshot((snapshot) => {\n                    setUsername(snapshot.data()?.username);\n                    snapshot.data()?.photoProfil ? setProfilePicture(user.photoURL) : setProfilePicture('https://firebasestorage.googleapis.com/v0/b/portarch-4f70e.appspot.com/o/icônes%2Fprofil2.png?alt=media&token=0f86a5d5-f039-42af-89fc-4f915f10a3d5');\n                    setUni(snapshot.data()?.uni);\n                    setPays(snapshot.data()?.pays)\n              });\n            } else {\n              setAuth(false)\n            }\n        });\n    }, []);\n\n    const reload = () => {\n        window.location.reload(true);\n    }\n    \n return (\n    <div>\n        <h1 onClick={reload}>PORTARCH</h1>\n        <Hamburger />\n        <Menu \n            refresh={refresh}\n            setRefresh={setRefresh}\n            mesœuvres={mesœuvres} \n            auth={auth} \n            userID={userID}\n            username={username as string} \n            setUsername={setUsername} \n            profilePicture={profilePicture} \n            setProfilePicture={setProfilePicture} \n            uni={uni}\n            setUni={setUni}\n            pays={pays}\n            setPays={setPays}\n        />\n        <div className=\"masterDIV\">\n            <div className=\"panneauContainer\" style={{paddingTop: `${margin}`, paddingBottom: `${margin}`}}>\n                {œuvres.map((œuvre: any) => <Panneau \n                                                key={œuvre.id} \n                                                refresh={refresh}\n                                                setRefresh={setRefresh}\n                                                auth={auth} \n                                                id={œuvre.id} \n                                                titre={œuvre.titre} \n                                                auteurID={œuvre.auteurID} \n                                                photo={œuvre.photo} \n                                                description={œuvre.description}\n                                                mesFavoris={mesFavoris}\n                                            />)}\n            </div>\n            <div className=\"slideAuteur\">\n            \n            </div>\n        </div>\n    </div>\n )\n}\n  \nexport default App;"]},"metadata":{},"sourceType":"module"}